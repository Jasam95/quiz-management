<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>Questions List</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
</head>
<body class="bg-light">

<div th:replace="~{fragments/navbar :: navbar}"></div>

<!-- Sidebar layout -->
<div th:replace="~{fragments/sidebar :: layout(~{::content})}">
    <div th:fragment="content">
        <div class="container mt-5">
            <div class="d-flex justify-content-between align-items-center mb-3">
                <h3 class="text-primary fw-bold">üìö Question Bank</h3>
                <a th:href="@{/admin/questions/new}" class="btn btn-success">‚ûï Add New Question</a>
            </div>

            <div th:if="${#lists.isEmpty(questions)}" class="alert alert-warning text-center">
                No questions available. Please add one.
            </div>

            <div th:each="question : ${questions}" class="card mb-3 shadow-sm border-0">
                <div class="card-header bg-dark text-white text-center">
                    <h5 th:text="${question.quiz.title}"></h5>
                </div>
                <div class="card-body">
                    <p><strong>Question:</strong> <span th:text="${question.questionText}"></span></p>
                    <p><strong>Points:</strong> <span th:text="${question.points}"></span></p>

                    <h6 class="mt-3">Choices:</h6>
                    <ul class="list-group">
                        <li th:each="choice : ${question.choices}"
                            class="list-group-item d-flex justify-content-between align-items-center"
                            th:classappend="${choice.isCorrect} ? 'list-group-item-success' : ''">
                            <span th:text="${choice.text}"></span>
                            <span th:if="${choice.isCorrect}" class="badge bg-success">Correct</span>
                        </li>
                    </ul>

                    <div class="mt-3 text-end">
                        <a th:href="@{/admin/questions/delete/{id}(id=${question.id})}" class="btn btn-danger btn-sm"
                           onclick="return confirm('Are you sure you want to delete this question?')">üóëÔ∏è Delete</a>


                    </div>
                </div>
            </div>
        </div>
    </div>
</div>


</body>
</html>
