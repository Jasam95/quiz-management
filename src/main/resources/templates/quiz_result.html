<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>Quiz Result</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <style>
        body {
            background: #f8f9fa;
        }
        .result-card {
            border-radius: 20px;
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.1);
        }
        .table th, .table td {
            vertical-align: middle;
        }
        .score-highlight {
            background: linear-gradient(135deg, #007bff, #6610f2);
            color: white;
            padding: 1rem;
            border-radius: 15px;
        }
        .correct {
            color: #28a745;
            font-weight: 600;
        }
        .wrong {
            color: #dc3545;
            font-weight: 600;
        }
        .not-attempted {
            color: #6c757d;
            font-weight: 600;
        }
    </style>
</head>
<body>
<div class="container mt-5">
    <div class="card result-card mx-auto p-4" style="max-width: 900px;">
        <div class="text-center mb-4">
            <h2 class="fw-bold text-primary">Quiz Result: <span th:text="${quiz.title}">Sample Quiz</span></h2>
            <p class="text-muted" th:text="${quiz.description}">Quiz description here</p>
        </div>

        <div class="score-highlight text-center mb-4">
            <h4>
                üßë‚Äçüíª <strong th:text="${attempt.participant.fullName}">Participant Name</strong>
            </h4>
            <h3 class="mt-2">
                üéØ Score:

                    <span th:text="${attempt.totalScore}"></span>
                    /
                    <span th:text="${quiz.totalMarks != null ? quiz.totalMarks : 0}"></span>
            </h3>
            <p class="mb-0 mt-2">
                ‚è± Time Taken:
                <span th:text="${attempt.timeTakenSeconds}">0</span> seconds
            </p>
        </div>

        <div class="table-responsive">
            <table class="table table-bordered align-middle text-center">
                <thead class="table-dark">
                <tr>
                    <th>#</th>
                    <th>Question</th>
                    <th>Your Answer</th>
                    <th>Status</th>
                </tr>
                </thead>
                <tbody>
                <tr th:each="ua, iterStat : ${attempt.userAnswers}">

                    <td th:text="${iterStat.count}">1</td>

                    <td th:text="${ua.question.questionText}">Question text</td>

                    <td>
                    <span th:if="${ua.selectedChoiceIds != null}">
                        <span th:each="choice : ${ua.question.choices}"
                              th:text="${choice.id.toString() == ua.selectedChoiceIds.toString() ? choice.text : ''}">
                        </span>
                    </span>
                        <span th:if="${ua.selectedChoiceIds == null}">Not Attempted</span>
                    </td>
                    <td>
                        <span th:if="${ua.isCorrect}" class="correct">‚úÖ Correct</span>
                        <span th:if="${!ua.isCorrect && ua.selectedChoice != null}" class="wrong">‚ùå Wrong</span>
                        <span th:if="${ua.selectedChoiceIds == null}" class="not-attempted">‚ö™ Not Attempted</span>
                    </td>
                </tr>
                </tbody>
            </table>
        </div>

        <div class="text-center mt-4">
            <a th:href="@{/participants/quizzes}" class="btn btn-outline-primary px-4 py-2">
                üîô Back to Quizzes
            </a>
        </div>
    </div>
</div>
</body>
</html>
